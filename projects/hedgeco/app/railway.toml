# Railway Deployment Configuration for HedgeCo.Net
# https://docs.railway.app/reference/config-as-code

[build]
# Build command - generates Prisma client and builds Next.js
builder = "NIXPACKS"
buildCommand = "npm run db:generate && npm run build"

[deploy]
# Start command
startCommand = "npm run start"

# Number of instances (scale up for production)
numReplicas = 1

# Health check configuration
healthcheckPath = "/api/health"
healthcheckTimeout = 300

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
# Environment variables (set actual values in Railway dashboard)
# These are defaults/examples
NODE_ENV = "production"
PORT = "3000"
NEXT_TELEMETRY_DISABLED = "1"

# Database (set DATABASE_URL in Railway dashboard, linked from Postgres plugin)
# DATABASE_URL = "${{Postgres.DATABASE_URL}}"

# Security - set these in Railway dashboard as secrets
# JWT_SECRET = "${{shared.JWT_SECRET}}"
# JWT_REFRESH_SECRET = "${{shared.JWT_REFRESH_SECRET}}"

[env.production]
# Production-specific environment variables
LOG_LEVEL = "warn"
